{"version":3,"sources":["functional/functional-tests.js"],"names":[],"mappings":"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","file":"functional/functional-tests.js","sourcesContent":["/*\n * Minio Javascript Library for Amazon S3 Compatible Cloud Storage, (C) 2015 Minio, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport minio from '../main/minio.js'\nimport os from 'os'\nimport stream from 'stream'\nimport crypto from 'crypto'\nimport async from 'async'\nimport _ from 'lodash'\nimport fs from 'fs'\nimport http from 'http'\nimport https from 'https'\nimport url from 'url'\nimport superagent from 'superagent'\n\nrequire('source-map-support').install()\n\ndescribe('functional tests', function() {\n  this.timeout(30*60*1000)\n  var client = new minio({\n    endPoint: 's3.amazonaws.com',\n    accessKey: process.env['ACCESS_KEY'],\n    secretKey: process.env['SECRET_KEY']\n  })\n  var bucketName = 'miniojs-bucket2'\n  var objectName = 'miniojsobject'\n\n  var _1byte = new Buffer(1)\n  _1byte.fill('a')\n  var _1byteObjectName = 'miniojsobject_1byte'\n\n  var _100kb = new Buffer(100*1024)\n  _100kb.fill('a')\n  var _100kbObjectName = 'miniojsobject_100kb'\n  var _100kbObjectBufferName = `${_100kbObjectName}.buffer`\n  var _100kbObjectStringName = `${_100kbObjectName}.string`\n  var _100kbmd5 = crypto.createHash('md5').update(_100kb).digest('hex')\n\n  var _11mb = new Buffer(11*1024*1024)\n  _11mb.fill('a')\n  var _11mbObjectName = 'miniojsobject_11mb'\n  var _11mbmd5 = crypto.createHash('md5').update(_11mb).digest('hex')\n\n  var _10mb = new Buffer(10*1024*1024)\n  _10mb.fill('a')\n  var _10mbObjectName = 'miniojsobject_10mb'\n  var _10mbmd5 = crypto.createHash('md5').update(_10mb).digest('hex')\n\n  var _5mb = new Buffer(5*1024*1024)\n  _5mb.fill('a')\n  var _5mbObjectName = 'miniojsobject_5mb'\n  var _5mbmd5 = crypto.createHash('md5').update(_5mb).digest('hex')\n\n  var tmpDir = os.tmpdir()\n\n  var traceStream\n\n  // FUNCTIONAL_TEST_TRACE env variable contains the path to which trace\n  // will be logged. Set it to /dev/stdout log to the stdout.\n  if (process.env['FUNCTIONAL_TEST_TRACE']) {\n    var filePath = process.env['FUNCTIONAL_TEST_TRACE']\n    // This is necessary for windows.\n    if (filePath === 'process.stdout') {\n      traceStream = process.stdout\n    } else {\n      traceStream = fs.createWriteStream(filePath, {flags: 'a'})\n    }\n    traceStream.write('====================================\\n')\n    client.traceOn(traceStream)\n  }\n\n  before(done => client.makeBucket(bucketName, '', done))\n  after(done => client.removeBucket(bucketName, done))\n\n  if (traceStream) {\n    after(() => {\n      client.traceOff()\n      if (filePath !== 'process.stdout') {\n        traceStream.end()\n      }\n    })\n  }\n\n  describe('makeBucket with period', () => {\n    it('should create bucket in eu-central-1 with period', done => client.makeBucket(`${bucketName}.sec.period`,\n                                                                                     'eu-central-1', done))\n    it('should delete bucket', done => client.removeBucket(`${bucketName}.sec.period`, done))\n  })\n\n  describe('listBuckets', () => {\n    it('should list bucket', done => {\n      client.listBuckets((e, buckets) => {\n        if (e) return done(e)\n        if(_.find(buckets, {name : bucketName})) return done()\n        done(new Error('bucket not found'))\n      })\n    })\n  })\n\n  describe('bucketExists', () => {\n    it('should check if bucket exists', done => client.bucketExists(bucketName, done))\n    it('should check if bucket does not exist', done => {\n      client.bucketExists(bucketName+'random', (e) => {\n        if (e.code === 'NoSuchBucket') return done()\n        done(new Error())\n      })\n    })\n  })\n\n  describe('tests for putObject getObject getPartialObject statObject removeObject', function() {\n    it('should upload 100KB stream', done => {\n      var stream = readableStream(_100kb)\n      client.putObject(bucketName, _100kbObjectName, stream, _100kb.length, '', done)\n    })\n\n    it('should download 100KB and match content', done => {\n      var hash = crypto.createHash('md5')\n      client.getObject(bucketName, _100kbObjectName, (e, stream) => {\n        if (e) return done(e)\n        stream.on('data', data => hash.update(data))\n        stream.on('error', done)\n        stream.on('end', () => {\n          if (hash.digest('hex') === _100kbmd5) return done()\n          done(new Error('content mismatch'))\n        })\n      })\n    })\n\n    it('should upload 100KB Buffer', done => {\n      client.putObject(bucketName, _100kbObjectBufferName, _100kb, '', done)\n    })\n\n    it('should download 100KB Buffer upload and match content', done => {\n      var hash = crypto.createHash('md5')\n      client.getObject(bucketName, _100kbObjectBufferName, (e, stream) => {\n        if (e) return done(e)\n        stream.on('data', data => hash.update(data))\n        stream.on('error', done)\n        stream.on('end', () => {\n          if (hash.digest('hex') === _100kbmd5) return done()\n          done(new Error('content mismatch'))\n        })\n      })\n    })\n\n    it('should upload 100KB string', done => {\n      client.putObject(bucketName, _100kbObjectStringName, _100kb.toString(), '', done)\n    })\n\n    it('should download 100KB string upload and match content', done => {\n      var hash = crypto.createHash('md5')\n      client.getObject(bucketName, _100kbObjectStringName, (e, stream) => {\n        if (e) return done(e)\n        stream.on('data', data => hash.update(data))\n        stream.on('error', done)\n        stream.on('end', () => {\n          if (hash.digest('hex') === _100kbmd5) return done()\n          done(new Error('content mismatch'))\n        })\n      })\n    })\n\n    it('should upload 11mb', done => {\n      var stream = readableStream(_11mb)\n      client.putObject(bucketName, _11mbObjectName, stream, _11mb.length, '', done)\n    })\n\n    it('should download 11mb and match content', done => {\n      var hash = crypto.createHash('md5')\n      client.getObject(bucketName, _11mbObjectName, (e, stream) => {\n        if (e) return done(e)\n        stream.on('data', data => hash.update(data))\n        stream.on('error', done)\n        stream.on('end', () => {\n          if (hash.digest('hex') === _11mbmd5) return done()\n          done(new Error('content mismatch'))\n        })\n      })\n    })\n\n    it('should download partial data (100kb of the 11mb file) and match content', done => {\n      var hash = crypto.createHash('md5')\n      client.getPartialObject(bucketName, _11mbObjectName, 0, 100*1024, (e, stream) => {\n        if (e) return done(e)\n        stream.on('data', data => hash.update(data))\n        stream.on('error', done)\n        stream.on('end', () => {\n          if (hash.digest('hex') === _100kbmd5) return done()\n          done(new Error('content mismatch'))\n        })\n      })\n    })\n\n    it('should stat object', done => {\n      client.statObject(bucketName, _11mbObjectName, (e, stat) => {\n        if (e) return done(e)\n        if (stat.size !== _11mb.length) return done(new Error('sise mismatch'))\n        done()\n      })\n    })\n\n    it('should remove objects created for test', done => {\n      async.map([_100kbObjectName, _100kbObjectBufferName, _100kbObjectStringName, _11mbObjectName], (objectName, cb) => client.removeObject(bucketName, objectName, cb), done)\n    })\n\n  })\n\n  describe('listIncompleteUploads removeIncompleteUpload', () => {\n    it('should create multipart request', done => {\n      var stream = readableStream('')\n      client.putObject(bucketName, _11mbObjectName, stream, _11mb.length, '', (e) => {\n        if(!e) return done(new Error('Expecing error'))\n        done()\n      })\n    })\n    it('should list incomplete upload', done => {\n      var found = false\n      client.listIncompleteUploads(bucketName, _11mbObjectName, true)\n        .on('error', e => done(e))\n        .on('data', data => {\n          if (data.key === _11mbObjectName) found = true\n        })\n        .on('end', () => {\n          if (found) return done()\n          done(new Error(`${_11mbObjectName} not found during listIncompleteUploads`))\n        })\n    })\n    it('should delete incomplete upload', done => {\n      client.removeIncompleteUpload(bucketName, _11mbObjectName, done)\n    })\n  })\n\n  describe('fPutObject fGetObject', function() {\n    var tmpFileUpload = `${tmpDir}/${_11mbObjectName}`\n    var tmpFileDownload = `${tmpDir}/${_11mbObjectName}.download`\n\n    it(`should create ${tmpFileUpload}`, () => fs.writeFileSync(tmpFileUpload, _11mb))\n\n    it('should upload object using fPutObject', done => client.fPutObject(bucketName, _11mbObjectName, tmpFileUpload, '', done))\n\n    it('should download object using fGetObject', done => client.fGetObject(bucketName, _11mbObjectName, tmpFileDownload, done))\n\n    it('should verify checksum', done => {\n      var md5sum = crypto.createHash('md5').update(fs.readFileSync(tmpFileDownload)).digest('hex')\n      if (md5sum === _11mbmd5) return done()\n      return done(new Error('md5sum mismatch'))\n    })\n\n    it('should remove files and objects created', (done) => {\n      fs.unlinkSync(tmpFileUpload)\n      fs.unlinkSync(tmpFileDownload)\n      client.removeObject(bucketName, _11mbObjectName, done)\n    })\n  })\n\n  describe('putObject (resume)', () => {\n    it('should create an incomplete upload', done => {\n      var stream = readableStream(_10mb)\n      // write just 10mb, so that it errors out and incomplete upload is created\n      client.putObject(bucketName, _11mbObjectName, stream, _11mb.length, '', (e, etag) => {\n        if (!e) done(new Error('Expecting Error'))\n        done()\n      })\n    })\n    it('should confirm the presence of incomplete upload', done => {\n      var stream = client.listIncompleteUploads(bucketName, _11mbObjectName, true)\n      var result\n      stream.on('error', done)\n      stream.on('data', data => {\n        if (data.key === _11mbObjectName)\n          result = data\n      })\n      stream.on('end', () => {\n        if (result) {\n          return done()\n        }\n        done(new Error('Uploaded part not found'))\n      })\n    })\n    it('should resume upload', done => {\n      var stream = readableStream(_11mb)\n      client.putObject(bucketName, _11mbObjectName, stream, _11mb.length, '', (e, etag) => {\n        if (e) return done(e)\n        done()\n      })\n    })\n    it('should remove the uploaded object', done => client.removeObject(bucketName, _11mbObjectName, done))\n  })\n\n  describe('fPutObject-resume', () => {\n    var _11mbTmpFile = `${tmpDir}/${_11mbObjectName}`\n    it('should create tmp file', () => fs.writeFileSync(_11mbTmpFile, _11mb))\n    it('should create an incomplete upload', done => {\n      var stream = readableStream(_10mb)\n      // write just 10mb, so that it errors out and incomplete upload is created\n      client.putObject(bucketName, _11mbObjectName, stream, _11mb.length, '', (e, etag) => {\n        if (!e) done(new Error('Expecting Error'))\n        done()\n      })\n    })\n    it('should confirm the presence of incomplete upload', done => {\n      var stream = client.listIncompleteUploads(bucketName, _11mbObjectName, true)\n      var result\n      stream.on('error', done)\n      stream.on('data', data => {\n        if (data.key === _11mbObjectName)\n          result = data\n      })\n      stream.on('end', () => {\n        if (result) {\n          return done()\n        }\n        done(new Error('Uploaded part not found'))\n      })\n    })\n    it('should resume upload', done => client.fPutObject(bucketName, _11mbObjectName, _11mbTmpFile, '', done))\n    it('should remove the uploaded object', done => client.removeObject(bucketName, _11mbObjectName, done))\n  })\n\n  describe('fGetObject-resume', () => {\n    var localFile = `${tmpDir}/${_5mbObjectName}`\n    it('should upload object', done => {\n      var stream = readableStream(_5mb)\n      client.putObject(bucketName, _5mbObjectName, stream, _5mb.length, '' , done)\n    })\n    it('should simulate a partially downloaded file', () => {\n      var tmpFile = `${tmpDir}/${_5mbObjectName}.${_5mbmd5}.part.minio-js`\n      // create a partial file\n      fs.writeFileSync(tmpFile, _100kb)\n    })\n    it('should resume the download', done => client.fGetObject(bucketName, _5mbObjectName, localFile, done))\n    it('should verify md5sum of the downloaded file', done => {\n      var data = fs.readFileSync(localFile)\n      var hash = crypto.createHash('md5').update(data).digest('hex')\n      if (hash === _5mbmd5) return done()\n      done(new Error('md5 of downloaded file does not match'))\n    })\n    it('should remove tmp files', done => {\n      fs.unlinkSync(localFile)\n      client.removeObject(bucketName, _5mbObjectName, done)\n    })\n  })\n\n  describe('presigned operatons', () => {\n    it('should upload using presignedUrl', done => {\n      client.presignedPutObject(bucketName, _1byteObjectName, 1000, (e, presignedUrl) => {\n        if(e) return done(e)\n        var transport = http\n        var options = _.pick(url.parse(presignedUrl), ['host', 'path', 'protocol'])\n        options.method = 'PUT'\n        options.headers = {\n          'content-length' : _1byte.length\n        }\n        if (options.protocol === 'https:') transport = https\n        var request = transport.request(options, (response) => {\n          if (response.statusCode !== 200) return done(new Error(`error on put : ${response.statusCode}`))\n          response.on('error', e => done(e))\n          response.on('end', () => done())\n          response.on('data', () => {})\n        })\n        request.on('error', e => done(e))\n        request.write(_1byte)\n        request.end()\n      })\n    })\n\n    it('should download using presignedUrl', done => {\n      client.presignedGetObject(bucketName, _1byteObjectName, 1000, (e, presignedUrl) => {\n        if(e) return done(e)\n        var transport = http\n        var options = _.pick(url.parse(presignedUrl), ['host', 'path', 'protocol'])\n        options.method = 'GET'\n        if (options.protocol === 'https:') transport = https\n        var request = transport.request(options, (response) => {\n          if (response.statusCode !== 200) return done(new Error(`error on put : ${response.statusCode}`))\n          var error = null\n          response.on('error', e => done(e))\n          response.on('end', () => done(error))\n          response.on('data', (data) => {\n            if (data.toString() !== _1byte.toString()) {\n              error = new Error('content mismatch')\n            }\n          })\n        })\n        request.on('error', e => done(e))\n        request.end()\n      })\n    })\n\n    it('should response headers set to expected values during download for presignedUrl', done => {\n      var respHeaders = {\n        'response-content-type': 'text/html',\n        'response-content-language': 'en',\n        'response-expires': 'Sun, 07 Jun 2020 16:07:58 GMT',\n        'response-cache-control': 'No-cache',\n        'response-content-disposition': 'attachment; filename=testing.txt',\n        'response-content-encoding': 'gzip'\n      }\n      client.presignedGetObject(bucketName, _1byteObjectName, 1000, respHeaders, (e, presignedUrl) => {\n        if (e) return done(e)\n        var transport = http\n        var options = _.pick(url.parse(presignedUrl), ['host', 'path', 'protocol'])\n        options.method = 'GET'\n        if (options.protocol === 'https:') transport = https\n        var request = transport.request(options, (response) => {\n          if (response.statusCode !== 200) return done(new Error(`error on get : ${response.statusCode}`))\n          if (respHeaders['response-content-type'] != response.headers['content-type']) {\n            return done(new Error(`content-type header mismatch`))\n          }\n          if (respHeaders['response-content-language'] != response.headers['content-language']) {\n            return done(new Error(`content-language header mismatch`))\n          }\n          if (respHeaders['response-expires'] != response.headers['expires']) {\n            return done(new Error(`expires header mismatch`))\n          }\n          if (respHeaders['response-cache-control'] != response.headers['cache-control']) {\n            return done(new Error(`cache-control header mismatch`))\n          }\n          if (respHeaders['response-content-disposition'] != response.headers['content-disposition']) {\n            return done(new Error(`content-disposition header mismatch`))\n          }\n          if (respHeaders['response-content-encoding'] != response.headers['content-encoding']) {\n            return done(new Error(`content-encoding header mismatch`))\n          }\n          response.on('data', (data) => {})\n          done()\n        })\n        request.on('error', e => done(e))\n        request.end()\n      })\n    })\n\n    it('should upload using presinged POST', done => {\n      var policy = client.newPostPolicy()\n      policy.setKey(_1byteObjectName)\n      policy.setBucket(bucketName)\n      var expires = new Date\n      expires.setSeconds(24 * 60 * 60 * 10)\n      policy.setExpires(expires)\n\n      client.presignedPostPolicy(policy, (e, urlStr, formData) => {\n        if (e) return done(e)\n        var req = superagent.post(`${urlStr}`)\n        _.each(formData, (value, key) => req.field(key, value))\n        req.field('file', _1byte)\n        req.end(function(e, response) {\n          if (e) return done(e)\n          done()\n        })\n        req.on('error', e => done(e))\n      })\n    })\n\n    it('should delete uploaded objects', done => {\n      client.removeObject(bucketName, _1byteObjectName, done)\n    })\n  })\n\n  describe('listObjects', function() {\n    var listObjectPrefix = 'miniojsPrefix'\n    var listObjectsNum = 10\n    var objArray = []\n    var listArray = []\n\n    it(`should create ${listObjectsNum} objects`, done => {\n      _.times(listObjectsNum, i => objArray.push(`${listObjectPrefix}.${i}`))\n      objArray = objArray.sort()\n      async.mapLimit(\n        objArray,\n        20,\n        (objectName, cb) => client.putObject(bucketName, objectName, readableStream(_1byte), _1byte.length, '', cb),\n        done\n      )\n    })\n\n    it('should list objects', done => {\n      client.listObjects(bucketName, '', true)\n        .on('error', done)\n        .on('end', () => {\n          if (_.isEqual(objArray, listArray)) return done()\n          return done(new Error(`listObjects lists ${listArray.length} objects, expected ${listObjectsNum}`))\n        })\n        .on('data', data => {\n          listArray.push(data.name)\n        })\n    })\n\n    it(`should delete objects`, done => {\n      async.mapLimit(\n        listArray,\n        20,\n        (objectName, cb) => client.removeObject(bucketName, objectName, cb),\n        done\n      )\n    })\n  })\n})\n\nfunction readableStream(data) {\n   var s = new stream.Readable()\n   s._read = () => {}\n   s.push(data)\n   s.push(null)\n   return s\n}\n"],"sourceRoot":"/source/"}